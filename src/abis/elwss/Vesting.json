{
    "contractName": "Vesting",
    "abi": [
        {
            "constant": true,
            "inputs": [],
            "name": "colonyMultiSig",
            "outputs": [
                {
                    "name": "",
                    "type": "address"
                }
            ],
            "payable": false,
            "stateMutability": "view",
            "type": "function"
        },
        {
            "constant": true,
            "inputs": [
                {
                    "name": "",
                    "type": "address"
                }
            ],
            "name": "tokenGrants",
            "outputs": [
                {
                    "name": "startTime",
                    "type": "uint256"
                },
                {
                    "name": "amount",
                    "type": "uint128"
                },
                {
                    "name": "vestingDuration",
                    "type": "uint16"
                },
                {
                    "name": "vestingCliff",
                    "type": "uint16"
                },
                {
                    "name": "monthsClaimed",
                    "type": "uint16"
                },
                {
                    "name": "totalClaimed",
                    "type": "uint128"
                }
            ],
            "payable": false,
            "stateMutability": "view",
            "type": "function"
        },
        {
            "constant": true,
            "inputs": [],
            "name": "token",
            "outputs": [
                {
                    "name": "",
                    "type": "address"
                }
            ],
            "payable": false,
            "stateMutability": "view",
            "type": "function"
        },
        {
            "inputs": [
                {
                    "name": "_token",
                    "type": "address"
                },
                {
                    "name": "_colonyMultiSig",
                    "type": "address"
                }
            ],
            "payable": false,
            "stateMutability": "nonpayable",
            "type": "constructor"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "name": "recipient",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "name": "startTime",
                    "type": "uint256"
                },
                {
                    "indexed": false,
                    "name": "amount",
                    "type": "uint128"
                },
                {
                    "indexed": false,
                    "name": "vestingDuration",
                    "type": "uint16"
                },
                {
                    "indexed": false,
                    "name": "vestingCliff",
                    "type": "uint16"
                }
            ],
            "name": "GrantAdded",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "name": "recipient",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "name": "amountVested",
                    "type": "uint128"
                },
                {
                    "indexed": false,
                    "name": "amountNotVested",
                    "type": "uint128"
                }
            ],
            "name": "GrantRemoved",
            "type": "event"
        },
        {
            "anonymous": false,
            "inputs": [
                {
                    "indexed": false,
                    "name": "recipient",
                    "type": "address"
                },
                {
                    "indexed": false,
                    "name": "amountClaimed",
                    "type": "uint128"
                }
            ],
            "name": "GrantTokensClaimed",
            "type": "event"
        },
        {
            "constant": false,
            "inputs": [
                {
                    "name": "_recipient",
                    "type": "address"
                },
                {
                    "name": "_startTime",
                    "type": "uint256"
                },
                {
                    "name": "_amount",
                    "type": "uint128"
                },
                {
                    "name": "_vestingDuration",
                    "type": "uint16"
                },
                {
                    "name": "_vestingCliff",
                    "type": "uint16"
                }
            ],
            "name": "addTokenGrant",
            "outputs": [],
            "payable": false,
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "constant": false,
            "inputs": [
                {
                    "name": "_recipient",
                    "type": "address"
                }
            ],
            "name": "removeTokenGrant",
            "outputs": [],
            "payable": false,
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "constant": false,
            "inputs": [],
            "name": "claimVestedTokens",
            "outputs": [],
            "payable": false,
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "constant": true,
            "inputs": [
                {
                    "name": "_recipient",
                    "type": "address"
                }
            ],
            "name": "calculateGrantClaim",
            "outputs": [
                {
                    "name": "",
                    "type": "uint16"
                },
                {
                    "name": "",
                    "type": "uint128"
                }
            ],
            "payable": false,
            "stateMutability": "view",
            "type": "function"
        }
    ],
    "bytecode": "0x608060405234801561001057600080fd5b506040516040806110928339810180604052604081101561003057600080fd5b508051602090910151816001600160a01b0381166100af57604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f636f6c6f6e792d746f6b656e2d7a65726f2d6164647265737300000000000000604482015290519081900360640190fd5b816001600160a01b03811661012557604080517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601960248201527f636f6c6f6e792d746f6b656e2d7a65726f2d6164647265737300000000000000604482015290519081900360640190fd5b5050600080546001600160a01b039384166001600160a01b03199182161790915560018054929093169116179055610f30806101626000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063da09118e1161005b578063da09118e14610136578063e74f3fbb14610183578063fc0c546a1461018b578063fd75b8d4146101935761007d565b806308ec6164146100825780633023641d146100a6578063b81a4d8f146100ce575b600080fd5b61008a6101df565b604080516001600160a01b039092168252519081900360200190f35b6100cc600480360360208110156100bc57600080fd5b50356001600160a01b03166101ee565b005b6100f4600480360360208110156100e457600080fd5b50356001600160a01b03166104d0565b604080519687526001600160801b03958616602088015261ffff94851687820152928416606087015292166080850152911660a0830152519081900360c00190f35b6100cc600480360360a081101561014c57600080fd5b506001600160a01b03813516906020810135906001600160801b036040820135169061ffff60608201358116916080013516610520565b6100cc61098c565b61008a610ba2565b6101b9600480360360208110156101a957600080fd5b50356001600160a01b0316610bb1565b6040805161ffff90931683526001600160801b0390911660208301528051918290030190f35b6001546001600160a01b031681565b6001546001600160a01b031633146102505760408051600160e51b62461bcd02815260206004820152601b60248201527f636f6c6f6e792d76657374696e672d756e617574686f72697a65640000000000604482015290519081900360640190fd5b6001600160a01b0381166000908152600260205260408120908061027384610bb1565b600185015460028601549294509092506000916102af916102a0916001600160801b039182169116610cdf565b836001600160801b0316610cdf565b6000805460408051600160e01b63a9059cbb0281526001600160a01b038a811660048301526001600160801b0388166024830152915194955091169263a9059cbb92604480840193602093929083900390910190829087803b15801561031457600080fd5b505af1158015610328573d6000803e3d6000fd5b505050506040513d602081101561033e57600080fd5b505161037e57604051600160e51b62461bcd028152600401808060200182810382526026815260200180610e936026913960400191505060405180910390fd5b6000805460015460408051600160e01b63a9059cbb0281526001600160a01b0392831660048201526001600160801b03861660248201529051919092169263a9059cbb92604480820193602093909283900390910190829087803b1580156103e557600080fd5b505af11580156103f9573d6000803e3d6000fd5b505050506040513d602081101561040f57600080fd5b505161044f57604051600160e51b62461bcd02815260040180806020018281038252602c815260200180610e40602c913960400191505060405180910390fd5b600084556001840180546001600160b01b03191690556002840180546001600160801b0319169055604080516001600160a01b03871681526001600160801b03848116602083015283168183015290517f340f6477ea48f04683f1f869a730e23ed8123e47f682b448d93174501e7aefdb9181900360600190a15050505050565b60026020819052600091825260409091208054600182015491909201546001600160801b038083169261ffff600160801b8204811693600160901b8304821693600160a01b909304909116911686565b6001546001600160a01b031633146105825760408051600160e51b62461bcd02815260206004820152601b60248201527f636f6c6f6e792d76657374696e672d756e617574686f72697a65640000000000604482015290519081900360640190fd5b6001600160a01b0385166000908152600260205260409020548590156105f25760408051600160e51b62461bcd02815260206004820152601e60248201527f636f6c6f6e792d746f6b656e2d757365722d6772616e742d6578697374730000604482015290519081900360640190fd5b60008261ffff161161064e5760408051600160e51b62461bcd02815260206004820152601e60248201527f636f6f6e792d746f6b656e2d7a65726f2d76657374696e672d636c6966660000604482015290519081900360640190fd5b8161ffff168361ffff161161069757604051600160e51b62461bcd028152600401808060200182810382526027815260200180610e6c6027913960400191505060405180910390fd5b60008361ffff16856001600160801b0316816106af57fe5b046001600160801b03169050600081116106fd57604051600160e51b62461bcd028152600401808060200182810382526029815260200180610eb96029913960400191505060405180910390fd5b6000805460015460408051600160e01b6323b872dd0281526001600160a01b0392831660048201523060248201526001600160801b038a166044820152905191909216926323b872dd92606480820193602093909283900390910190829087803b15801561076a57600080fd5b505af115801561077e573d6000803e3d6000fd5b505050506040513d602081101561079457600080fd5b5061079f9050610e0a565b6040518060c00160405280886000146107b857886107ba565b425b8152602001876001600160801b031681526020018661ffff1681526020018561ffff168152602001600061ffff16815260200160006001600160801b0316815250905080600260008a6001600160a01b03166001600160a01b031681526020019081526020016000206000820151816000015560208201518160010160006101000a8154816001600160801b0302191690836001600160801b0316021790555060408201518160010160106101000a81548161ffff021916908361ffff16021790555060608201518160010160126101000a81548161ffff021916908361ffff16021790555060808201518160010160146101000a81548161ffff021916908361ffff16021790555060a08201518160020160006101000a8154816001600160801b0302191690836001600160801b031602179055509050507f4995f92ede8051f62ebd282d2097795d0569de63589fb49da0064f43cb47c8af88826000015188888860405180866001600160a01b03166001600160a01b03168152602001858152602001846001600160801b03166001600160801b031681526020018361ffff1661ffff1681526020018261ffff1661ffff1681526020019550505050505060405180910390a15050505050505050565b60008061099833610bb1565b90925090506001600160801b0381166109fb5760408051600160e51b62461bcd02815260206004820152601f60248201527f636f6c6f6e792d746f6b656e2d7a65726f2d616d6f756e742d76657374656400604482015290519081900360640190fd5b3360009081526002602052604090206001810154610a289061ffff600160a01b9091048116908516610d40565b60018201805461ffff92909216600160a01b0275ffff0000000000000000000000000000000000000000199092169190911790556002810154610a78906001600160801b03908116908416610d40565b6002820180546001600160801b0319166001600160801b039283161790556000805460408051600160e01b63a9059cbb0281523360048201529386166024850152516001600160a01b039091169263a9059cbb9260448083019360209390929083900390910190829087803b158015610af057600080fd5b505af1158015610b04573d6000803e3d6000fd5b505050506040513d6020811015610b1a57600080fd5b5051610b5a57604051600160e51b62461bcd028152600401808060200182810382526023815260200180610ee26023913960400191505060405180910390fd5b604080513381526001600160801b038416602082015281517f2962855c62781b7b45ee6a244c72c6b1eaa1b883b9bbbe60fcff273aa480c8d2929181900390910190a1505050565b6000546001600160a01b031681565b6001600160a01b03811660009081526002602052604081208054829190421015610be2575060009150819050610cda565b6000610bf2428360000154610cdf565b6001830154909150622819a0820490600160901b900461ffff16811015610c23575060009350839250610cda915050565b6001830154600160801b900461ffff168110610c68575050600281015460019091015461ffff600160801b82041693506001600160801b039182169116039050610cda565b6001830154600090610c86908390600160a01b900461ffff16610cdf565b600185015490915060009061ffff600160801b820416906001600160801b031681610cad57fe5b046001600160801b031690506000610cc98361ffff1683610d9b565b929750919550610cda945050505050565b915091565b80820382811115610d3a5760408051600160e51b62461bcd02815260206004820152601560248201527f64732d6d6174682d7375622d756e646572666c6f770000000000000000000000604482015290519081900360640190fd5b92915050565b80820182811015610d3a5760408051600160e51b62461bcd02815260206004820152601460248201527f64732d6d6174682d6164642d6f766572666c6f77000000000000000000000000604482015290519081900360640190fd5b6000811580610db657505080820282828281610db357fe5b04145b610d3a5760408051600160e51b62461bcd02815260206004820152601460248201527f64732d6d6174682d6d756c2d6f766572666c6f77000000000000000000000000604482015290519081900360640190fd5b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a08101919091529056fe636f6c6f6e792d746f6b656e2d636f6c6f6e792d6d756c74697369672d7472616e736665722d6661696c6564636f6c6f6e792d746f6b656e2d636c6966662d6c6f6e6765722d7468616e2d6475726174696f6e636f6c6f6e792d746f6b656e2d726563697069656e742d7472616e736665722d6661696c6564636f6c6f6e792d746f6b656e2d7a65726f2d616d6f756e742d7665737465642d7065722d6d6f6e7468636f6c6f6e792d746f6b656e2d73656e6465722d7472616e736665722d6661696c6564a165627a7a7230582004d59b38304c6362be9c6ba30a39f9e31a1f867f85421a3502a0719ef9ec68250029",
    "devdoc": {
        "methods": {
            "addTokenGrant(address,uint256,uint128,uint16,uint16)": {
                "params": {
                    "_amount": "Total number of tokens in grant",
                    "_recipient": "Address of the token grant recipient entitled to claim the grant funds",
                    "_startTime": "Grant start time as seconds since unix epoch Allows backdating grants by passing time in the past. If `0` is passed here current blocktime is used. ",
                    "_vestingCliff": "Number of months of the grant's vesting cliff",
                    "_vestingDuration": "Number of months of the grant's duration"
                }
            },
            "removeTokenGrant(address)": {
                "params": {
                    "_recipient": "Address of the token grant recipient"
                }
            }
        }
    },
    "userdoc": {
        "methods": {
            "addTokenGrant(address,uint256,uint128,uint16,uint16)": {
                "notice": "Add a new token grant for user `_recipient`. Only one grant per user is allowed The amount of CLNY tokens here need to be preapproved for transfer by this `Vesting` contract before this call Secured to the Colony MultiSig only"
            },
            "calculateGrantClaim(address)": {
                "notice": "Calculate the vested and unclaimed months and tokens available for `_recepient` to claim Due to rounding errors once grant duration is reached, returns the entire left grant amount Returns (0, 0) if cliff has not been reached"
            },
            "claimVestedTokens()": {
                "notice": "Allows a grant recipient to claim their vested tokens. Errors if no tokens have vested It is advised recipients check they are entitled to claim via `calculateGrantClaim` before calling this"
            },
            "removeTokenGrant(address)": {
                "notice": "Terminate token grant transferring all vested tokens to the `_recipient` and returning all non-vested tokens to the Colony MultiSig Secured to the Colony MultiSig only"
            }
        }
    }
}